:root{
  --bg:#f7f7fb;
  --ink:#1d2230;
  --ink-soft:rgba(29,34,48,.72);
  --muted:#7a839a;
  --primary:#8ea8ff;
  --accent:#ffd1e8;
  --ok:#8be28b;
  --warn:#ffc66b;
  --danger:#ff7b8a;
  --card:#ffffff;
  --shadow:0 8px 18px rgba(20,24,40,.12), 0 2px 6px rgba(20,24,40,.08);
  --radius:18px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:ui-rounded,system-ui,"Segoe UI","Apple SD Gothic Neo","Pretendard",Roboto,sans-serif;
  background:
    radial-gradient(1200px 600px at 10% -10%, #eef2ff 0%, transparent 60%),
    radial-gradient(800px 400px at 110% 0%, #ffe9f4 0%, transparent 60%),
    var(--bg);
  color:var(--ink);
}
.app{display:grid;grid-template-rows:auto 1fr auto;gap:12px;height:100%;max-width:1200px;margin:0 auto;padding:14px}
header{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
header h1{font-size:18px;margin:0;font-weight:800;letter-spacing:.2px}
header .opts{display:flex;gap:8px;align-items:center;color:var(--muted);flex-wrap:wrap}
header .opts label{display:flex;align-items:center;gap:6px;background:#fff;border-radius:999px;padding:6px 10px;box-shadow:var(--shadow)}
header .opts select{appearance:none;border:1px solid rgba(29,34,48,.12);border-radius:12px;padding:6px 28px 6px 10px;font-weight:600;color:var(--ink);background:#fff;box-shadow:var(--shadow)}
header .badge{background:#fff;color:var(--ink-soft);box-shadow:var(--shadow)}

.board{display:grid;gap:16px;height:100%;grid-auto-rows:minmax(0,max-content)}
.board-main{display:flex;flex-direction:column;gap:16px}
.panel-melds{display:flex;flex-direction:column;gap:12px}
.panel-hand{position:sticky;bottom:0;z-index:2}
.right{display:flex;flex-direction:column;gap:12px}

body.is-desktop .board{grid-template-columns:minmax(0,1.45fr) 320px;grid-template-rows:minmax(0,1fr) auto auto;grid-template-areas:"arena sidebar" "hand sidebar" "melds sidebar";align-items:start}
body.is-desktop .board-main{grid-area:arena}
body.is-desktop .panel-hand{grid-area:hand}
body.is-desktop .panel-melds{grid-area:melds}
body.is-desktop .right{grid-area:sidebar}

body.is-mobile .app{padding:12px;gap:10px}
body.is-mobile header{flex-direction:column;align-items:stretch;gap:6px}
body.is-mobile header h1{width:100%;font-size:16px}
body.is-mobile header .opts{width:100%;justify-content:space-between}
body.is-mobile header .opts label{flex:1 1 160px;justify-content:center}
body.is-mobile .board{grid-template-columns:1fr;grid-template-areas:"arena" "hand" "melds" "players" "finish" "online";gap:12px}
body.is-mobile .board-main{grid-area:arena}
body.is-mobile .panel-hand{grid-area:hand;box-shadow:var(--shadow)}
body.is-mobile .panel-melds{grid-area:melds}
body.is-mobile .right{display:contents}
body.is-mobile .panel-players{grid-area:players}
body.is-mobile .panel-finish{grid-area:finish}
body.is-mobile .panel-online{grid-area:online}
body.is-mobile footer{flex-direction:column;align-items:stretch;text-align:center;gap:10px}
body.is-mobile footer button{width:100%}

.arena{position:relative;border-radius:24px;padding:14px;background:linear-gradient(180deg,#f9fbff,#eef3ff);box-shadow:var(--shadow);overflow:hidden}
.arena-stage{position:relative;border-radius:20px;padding:12px;background:#ffffff;box-shadow:inset 0 0 0 1px rgba(29,34,48,.04);min-height:320px}
.arena-surface{position:relative;border-radius:18px;background:linear-gradient(180deg,#f4f6ff 0%,#e9efff 100%);padding:16px;min-height:280px;display:flex;align-items:center;justify-content:center}
.arena .zones{display:grid;width:100%;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
.zone{background:#fff;border-radius:18px;box-shadow:var(--shadow);padding:12px;min-height:110px;display:flex;flex-direction:column;gap:8px}
.zone h3{margin:0 0 6px;font-size:12px;color:var(--muted);text-transform:uppercase;letter-spacing:.6px}
.zone .hud{justify-content:space-between}

.seat-layer{position:absolute;inset:18px;pointer-events:none;--orbit:46%;}
.seat{position:absolute;left:50%;top:50%;width:138px;transform:rotate(calc(var(--angle))) translateY(calc(-1 * var(--orbit))) rotate(calc(var(--angle) * -1));transform-origin:center;background:#fff;border-radius:18px;box-shadow:var(--shadow);padding:10px 12px;display:flex;flex-direction:column;gap:4px;align-items:center;color:var(--ink);transition:transform .3s ease,box-shadow .3s ease,opacity .3s ease}
.seat .seat-name{font-weight:700;font-size:14px}
.seat .seat-meta{font-size:12px;color:var(--muted)}
.seat[data-bot="true"] .seat-name::after{content:"ðŸ¤–";margin-left:6px}
.seat[data-bot="false"] .seat-name::after{content:"ðŸ™‚";margin-left:6px}
.seat[data-turn="true"]{box-shadow:0 12px 24px rgba(142,168,255,.4);border:2px solid var(--primary)}
.seat[data-turn="true"] .seat-name::after{content:"ðŸ”¥";margin-left:6px}
.seat[data-status="out"]{opacity:.45}

.panel{background:#fff;border-radius:20px;box-shadow:var(--shadow);padding:12px;color:var(--ink)}
.panel strong{color:var(--ink)}
.panel small{color:var(--muted)}
.panel-title{margin:0 0 8px 0;font-size:13px;color:var(--muted);letter-spacing:.4px;text-transform:uppercase}
.panel-head{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:10px}

.hud{display:flex;flex-wrap:wrap;gap:8px}
button{appearance:none;border:none;background:var(--ink);color:#fff;padding:10px 12px;border-radius:14px;font-weight:700;cursor:pointer;box-shadow:var(--shadow);transition:transform .2s ease,box-shadow .2s ease}
button:hover{transform:translateY(-2px)}
button.ghost{background:#fff;color:var(--ink);border:2px solid #e8ebff}
button:disabled{opacity:.45;cursor:not-allowed;transform:none;box-shadow:var(--shadow)}
button.danger{background:linear-gradient(180deg,#ff7b8a,#ff4d6b)}

.badge{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:#fff;box-shadow:var(--shadow);font-size:12px;color:var(--muted)}
.pill{display:inline-block;padding:3px 8px;border-radius:999px;background:#eef4ff;color:#4b61d1;font-weight:700}

.cards{display:flex;align-items:flex-end;flex-wrap:wrap;gap:8px}
.hand .cards{justify-content:center}
.card{width:70px;height:98px;border-radius:16px;background:var(--card);box-shadow:var(--shadow);position:relative;transition:.25s transform,.25s box-shadow,.25s opacity;cursor:pointer;user-select:none}
.card:hover{transform:translateY(-6px) rotate(-.6deg)}
.card .inner{position:absolute;inset:0;border-radius:inherit;display:grid;place-items:center;padding:6px}
.rank{font-weight:900;font-size:22px}
.suit{font-size:18px}
.red{color:#e34d5c}
.black{color:#2b2f3a}
.selected{outline:3px solid var(--primary);outline-offset:0}
.disabled{opacity:.45;pointer-events:none}

.meld{padding:12px;border-radius:14px;background:linear-gradient(180deg,#ffffff,#f7f9ff);box-shadow:var(--shadow);animation:pop .25s ease}
.meld .cards{gap:-46px}
.meld .card{transform:rotate(0)}

.log{font-size:12px;color:var(--muted);max-height:160px;overflow:auto}
.rankpill{display:inline-block;background:#eef1ff;color:#5364c7;padding:4px 10px;border-radius:999px;font-weight:700}

.toast{position:fixed;right:16px;bottom:16px;background:#111827;color:#fff;padding:10px 12px;border-radius:12px;opacity:.95;animation:slideup .25s ease;box-shadow:var(--shadow)}

.button-row{display:flex;gap:8px;flex-wrap:wrap}
.button-row button{flex:1 1 auto}
.button-row .badge{flex:0 0 auto}

.net-io{display:flex;flex-direction:column;gap:8px;margin-top:10px}
textarea{background:#fff;border:1px solid rgba(29,34,48,.12);border-radius:14px;padding:10px;color:var(--ink);width:100%;min-height:80px;resize:vertical;font-family:inherit;box-shadow:var(--shadow)}
textarea[readonly]{opacity:.7}

.player-line{display:flex;align-items:center;justify-content:space-between;gap:8px;margin:6px 0;padding:8px 12px;border-radius:12px;background:#fff;box-shadow:var(--shadow);color:var(--muted)}
.player-name{display:flex;align-items:center;gap:6px;color:var(--ink)}
.player-type{font-size:16px}
.player-line[data-turn="true"]{background:#eef1ff;color:#4b61d1}
.player-line[data-turn="true"] .player-name{color:#1d2230}
.player-line[data-status="out"]{opacity:.45}
.player-line .rankpill{background:#e0e6ff;color:#4b61d1}

footer{display:flex;align-items:center;justify-content:space-between;gap:12px;color:var(--muted);background:#fff;padding:14px 18px;border-radius:20px;box-shadow:var(--shadow);margin-top:4px}
footer button{min-width:120px}

body.is-mobile .arena{padding:12px}
body.is-mobile .arena-stage{min-height:260px}
body.is-mobile .arena-surface{min-height:220px;padding:14px}
body.is-mobile .zones{grid-template-columns:minmax(0,1fr);gap:10px}
body.is-mobile .zone{min-height:120px}
body.is-mobile .card{width:64px;height:90px}
body.is-mobile .meld .cards{gap:-40px}
body.is-mobile .seat-layer{display:none}

@media (max-width:1024px){
  body.is-desktop .board{grid-template-columns:minmax(0,1fr);grid-template-areas:"arena" "hand" "melds" "sidebar"}
  body.is-desktop .right{order:0}
}

@media (max-width:720px){
  body{background:
    radial-gradient(900px 480px at 10% -10%, #eef2ff 0%, transparent 60%),
    radial-gradient(600px 320px at 110% 0%, #ffe9f4 0%, transparent 60%),
    var(--bg);
  }
  header .opts{gap:6px}
  header .opts label{padding:6px 8px}
  .panel{padding:10px}
  .panel-hand .hud{gap:6px}
  .panel-hand .hud button{flex:1 1 calc(50% - 6px)}
  .button-row{gap:6px}
  .arena-stage{padding:10px}
  .arena-surface{padding:12px}
  .zone{padding:10px}
  .hud{gap:6px}
}

@keyframes slideup{from{transform:translateY(12px);opacity:0}to{transform:translateY(0);opacity:1}}
@keyframes pop{from{transform:scale(.96)}to{transform:scale(1)}}
@keyframes drop{from{transform:translateY(-10px);opacity:.6}to{transform:translateY(0);opacity:1}}
.enter{animation:drop .2s ease}

.flycard{position:fixed;pointer-events:none;z-index:9999;width:70px;height:98px;border-radius:16px;background:#fff;box-shadow:var(--shadow);display:grid;place-items:center;transition:transform .28s ease,opacity .28s ease}
.flyrank{font-weight:900;font-size:22px;color:#2b2f3a}
.flysuit{font-size:18px;color:#2b2f3a}
